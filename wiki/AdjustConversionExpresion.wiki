#Calibration example

= Introduction =

An example on how to calibre DS1000.Temperature sensor using the _adjust conversion expressions tool_.



= Step 1 =

First we must have a *reference device* that we know it shows the right temperature, for example our home thermometer. In this example, *real value is 30ยบ.*

So, we start a network, and our temperature values from node 3 are not calibrated:

https://sky-boards-collect.googlecode.com/svn/wiki/img/imgcal1.jpg

In other words: *CONVERSION(adc_value)=24*, and it should be 30

= Step 2 =

We need to know ADC_VALUE. This is the output from ADC12 that a node sends to application. We can see this value in console.

https://sky-boards-collect.googlecode.com/svn/wiki/img/imgcal2.jpg

To know which is the right column, we have to see *SensorInfo* java class in source file:

{{{
  public static final int BATTERY_VOLTAGE = 20;
  public static final int BATTERY_INDICATOR = 21;
  public static final int CO = 22;
  public static final int CO2 = 23;
  public static final int DUST = 24;
  public static final int LIGHT1 = 22;
  public static final int LIGHT2 = 23;
  public static final int TEMPERATURE = 24;
  public static final int HUMIDITY = 25;
  public static final int RSSI = 26;
}}}

*NOTE: In Release 1.1b, it wont be necessary to look for adc_value in console...* 

= Step 3 =

Then we have CONVERSION(adc_value)=24, and this is wrong according to our reference thermometer :(

https://sky-boards-collect.googlecode.com/svn/wiki/img/imgcal3.jpg

 * Select node 3 and go to "Tools->Adjust conversion expressions>Temperature sensor"

 * Change values until *CONVERSION(2349)=30*

You should change preferably Vcc and/or Vref, if your batteries have some time or you don't know which Vref is using the firmware to configure ADC12 ref input.



By trial and error method we found a good value (you could also try a more advanced method based in ecuations resolution). In this example if we change Vcc to 2.66 it gives the good conversion

https://sky-boards-collect.googlecode.com/svn/wiki/img/imgcal4.jpg

https://sky-boards-collect.googlecode.com/svn/wiki/img/imgcal5.jpg


Now, close adjust conversion expressions dialog and chart will be updated to the right values:

https://sky-boards-collect.googlecode.com/svn/wiki/img/imgcal6.jpg